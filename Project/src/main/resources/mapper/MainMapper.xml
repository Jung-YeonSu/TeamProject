<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.prj.main.mapper.MainMapper">  
  
  <select id="getSkill">
  	SELECT SKILL_NAME
  	FROM SKILLS
  </select>
 
 	<select id="getPostList">
 		SELECT 
			P.POST_IDX,
			P.COMPANY_IDX,
			RC.CITY_NAME,
			D.DUTY_NAME,
			POST_TITLE,
			POST_EB,
			POST_CONTENT,
			POST_SALARY,
			POST_HIT,
			POST_DDATE,
			POST_CDATE,
			POST_FDATE
			FROM POST P LEFT JOIN REGIONS_CITY RC ON P.CITY_ID = RC.CITY_ID
            			LEFT JOIN DUTY D          ON P.DUTY_ID = D.DUTY_ID
 	</select>

  <select id="getFilteredPosts">
    SELECT 
			P.POST_IDX,
			P.COMPANY_IDX,
			RC.CITY_NAME,
			D.DUTY_NAME,
			POST_TITLE,
			POST_EB,
			POST_CONTENT,
			POST_SALARY,
			POST_HIT,
			POST_DDATE,
			POST_CDATE,
			POST_FDATE
			FROM POST P LEFT JOIN REGIONS_CITY RC ON P.CITY_ID = RC.CITY_ID
            			LEFT JOIN DUTY D          ON P.DUTY_ID = D.DUTY_ID
    WHERE 1=1
    <if test="city_id != null and city_id != ''">
      AND P.city_id = #{city_id}
    </if>
    <if test="duty_id != null and duty_id != ''">
      AND P.duty_id = #{duty_id}
    </if>
    <if test="career_id != null and career_id != ''">
      AND P.career_id = #{career_id}
    </if>
    <if test="emp_id != null and emp_id != ''">
      AND P.emp_id = #{emp_id}
    </if>
  </select>
 
</mapper>

















