<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.prj.main.mapper.MainMapper">  

  <select id="getPostList">
  	SELECT
	    P.POST_IDX,
	    CO.COMPANY_NAME,
	    D.DUTY_NAME,
	    CR.CAREER_NAME,
	    E.EMP_NAME,
	    C.CITY_NAME,
	    ED.EDU_NAME,
	    POST_TITLE,
	    POST_CONTENT,
	    POST_SALARY,
	    POST_HIT,
	    POST_DDATE,
	    POST_CDATE,
	    POST_FDATE
	FROM
	    POST P LEFT JOIN DUTY D ON P.DUTY_ID = D.DUTY_ID
	           LEFT JOIN CITY C ON P.CITY_ID = C.CITY_ID
	           LEFT JOIN CAREER CR ON P.CAREER_ID = CR.CAREER_ID
	           LEFT JOIN EMP E ON P.EMP_ID = E.EMP_ID
	           LEFT JOIN EDU ED ON P.EDU_ID = ED.EDU_ID 
	           LEFT JOIN COMPANYS CO ON P.COMPANY_IDX = CO.COMPANY_IDX
  </select>
  
  <select id="getFilteredPosts">
		   	SELECT
	    P.POST_IDX,
	    CO.COMPANY_NAME,
	    D.DUTY_NAME,
	    CR.CAREER_NAME,
	    E.EMP_NAME,
	    C.CITY_NAME,
	    ED.EDU_NAME,
	    POST_TITLE,
	    POST_CONTENT,
	    POST_SALARY,
	    POST_HIT,
	    POST_DDATE,
	    POST_CDATE,
	    POST_FDATE
	FROM
	    POST P LEFT JOIN DUTY D ON P.DUTY_ID = D.DUTY_ID
	           LEFT JOIN CITY C ON P.CITY_ID = C.CITY_ID
	           LEFT JOIN CAREER CR ON P.CAREER_ID = CR.CAREER_ID
	           LEFT JOIN EMP E ON P.EMP_ID = E.EMP_ID
	           LEFT JOIN EDU ED ON P.EDU_ID = ED.EDU_ID 
	           LEFT JOIN COMPANYS CO ON P.COMPANY_IDX = CO.COMPANY_IDX
    WHERE 1=1
    <if test="city_id != null and city_id != ''">
      AND P.city_id = #{city_id}
    </if>
    <if test="duty_id != null and duty_id != ''">
      AND P.duty_id = #{duty_id}
    </if>
    <if test="career_id != null and career_id != ''">
      AND P.career_id = #{career_id}
    </if>
    <if test="emp_id != null and emp_id != ''">
      AND P.emp_id = #{emp_id}
    </if>

  </select>
 
</mapper>

















